package mainTest;

import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.net.UnknownHostException;
import java.nio.ByteBuffer;
import java.nio.channels.DatagramChannel;

import org.yakindu.scr.lightswitch.LightSwitchStatemachine;

import udp.ReceiveUDP;

public class Test
{
	public static void main(String[] args) throws Exception
	{

		// DatagramChannel receivingChannel = DatagramChannel.open();
		//
		// SocketAddress receivingSocket = new InetSocketAddress(InetAddress.getLoopbackAddress(), 8888);
		// InetSocketAddress sendingSocket = new InetSocketAddress(InetAddress.getLoopbackAddress(), 9999);
		//
		// receivingChannel.socket().bind(receivingSocket);
		// receivingChannel.configureBlocking(false);
		// receivingChannel.connect(sendingSocket);
		//
		// ByteBuffer packet = ByteBuffer.allocate(1024);
		//
		// System.out.println(((InetSocketAddress) receivingSocket).getAddress() + ":" + ((InetSocketAddress) receivingSocket).getPort());
		// while (true)
		// {
		// packet.clear();
		// if (receivingChannel.receive(packet) != null)
		// {
		// System.out.println(new String(packet.array()));
		// }
		// }

		ReceiveUDP receive = new ReceiveUDP(InetAddress.getLoopbackAddress(), 8888);
		// LightSwitchStatemachine lightSwitch = new LightSwitchStatemachine();
		//
		// lightSwitch.init();
		// lightSwitch.enter();

		while (true)
		{
			String incomingMessage = receive.receive(true, InetAddress.getLoopbackAddress(), 9999);
			System.out.println("Msg: " + incomingMessage);
			// if (incomingMessage != null && incomingMessage.equals("Klick"))
			// {
			// System.out.println("Switch klicked");
			// lightSwitch.getSCIUser().raiseOperate();
			// }
			// lightSwitch.runCycle();
			 Thread.sleep(500);
		}
	}
}
