package mainTest;

import java.net.InetAddress;
import java.net.UnknownHostException;

import lightswitch.LightSwitchStatemachine;
import udp.ReceiveUDP;

public class Test
{
	public static void main(String[] args) throws Exception
	{
		ReceiveUDP receive = new ReceiveUDP(InetAddress.getLoopbackAddress(), 8888);
		LightSwitchStatemachine lightSwitch = new LightSwitchStatemachine();

		lightSwitch.init();
		lightSwitch.enter();
		
		while (true)
		{
			String incomingMessage = receive.receive(false);
			System.out.println("Msg: " + incomingMessage);
			if (incomingMessage != null && incomingMessage.equals("Klick"))
			{
				System.out.println("Switch klicked");
				lightSwitch.getSCIUser().raiseOperate();
			}
			lightSwitch.runCycle();
			Thread.sleep(500);
		}
	}
}
